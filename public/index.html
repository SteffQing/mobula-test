<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Mobula Test - $APE Market Data</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="site-header" role="banner">
      <div class="container">
        <h1 class="title">$APE Market Data</h1>
        <p class="subtitle">View price, volume, and liquidity for the selected date range.</p>
      </div>
    </header>

    <main class="container" role="main">
      <section aria-labelledby="controls-heading" class="card controls">
        <div class="controls-grid">
          <div class="field">
            <label for="fromDate">From (DD-MM-YYYY)</label>
            <input
              id="fromDate"
              name="fromDate"
              type="text"
              inputmode="numeric"
              autocomplete="off"
              placeholder="DD-MM-YYYY"
              pattern="\\d{2}-\\d{2}-\\d{4}"
              value="01-03-2023"
              aria-describedby="dateHelp"
            />
          </div>

          <div class="field">
            <label for="toDate">To (DD-MM-YYYY)</label>
            <input
              id="toDate"
              name="toDate"
              type="text"
              inputmode="numeric"
              autocomplete="off"
              placeholder="DD-MM-YYYY"
              pattern="\\d{2}-\\d{2}-\\d{4}"
              value="04-04-2023"
              aria-describedby="dateHelp"
            />
          </div>

          <div class="field">
            <label for="timeframe">Timeframe</label>
            <select id="timeframe" name="timeframe">
              <option value="auto" selected>Auto</option>
              <option value="hourly">Hourly</option>
              <option value="daily">Daily</option>
            </select>
          </div>

          <div class="actions">
            <button id="fetchBtn" type="button" class="btn btn-primary">Fetch Data</button>
          </div>
        </div>

        <p id="dateHelp" class="help">Tip: Use the DD-MM-YYYY format. Ranges longer than 30 days are truncated.</p>
        <p id="error" class="error" role="alert" aria-live="polite"></p>
      </section>

      <section aria-labelledby="table-heading" class="card">
        <div class="card-header">
          <h2 id="table-heading">Market History</h2>
          <div class="meta">
            <span id="activeTimeframe" class="badge">—</span>
          </div>
        </div>

        <div class="table-wrap">
          <table id="marketTable">
            <thead>
              <tr>
                <th scope="col">Date</th>
                <th scope="col">Price (USD)</th>
                <th scope="col">Volume (USD)</th>
                <th scope="col">Liquidity (SRG)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="emptyState" class="empty" hidden>No data found for the selected range.</div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <small>Powered by Mobula Test API • UTC-based dates</small>
      </div>
    </footer>

    <script src="./app.js" defer></script>
  </body>
</html>
